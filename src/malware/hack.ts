import { NS } from "@ns";

/**
 * Hacks the specified target server with optional flags for threads and iterations.
 * @usage ns.exec("hack.js", host, 1, <target>, --threads, <threads>, --iterations, <iterations>)
 * @example ns.exec("hack.js", "n00dles", 1, "foodnstuff", "--threads", 2, "--iterations", 10)
 * @param ns - The netscript interface to bitburner functions.
 */
export async function main(ns: NS) {
    /* 
     * First argument is always the target server to hack
     * Optional flags for threads and iterations
     */
    const flags = ns.flags([
        ['threads', 1],
        ['iterations', 1],
    ]);

    const target = ns.args[0] as string;
    ns.printf(`hacking ${target} with ${flags.threads} threads for ${flags.iterations} iterations.`);
    const moneyStolen = await ns.hack(target, { threads: flags.threads as number});
    ns.printf(`stole $${moneyStolen} from ${target}.`);
}
