// import { functionName, functionName2 } from "./utils.js"
// RAM 1.75 GB (base, grow)

/* grow: Minimal grow-only script, repeat hack x times
 * syntax: grow.js target numIterations
 */

/** @param {NS} ns **/
export async function main(ns) {

    const target = ns.args[0];
    var numIterations = ns.args[1];
    if (numIterations == undefined) {
        numIterations = 1;
    }

    for(let i=1;i<=numIterations;i++){
        
        var start = performance.now()
        
        /*  The runtime for this function depends on 
            your hacking level and the target serverâ€™s security level

            !! You can grow any server, even at hacking level 1 (with root access)
        
            All servers start at 4% money available. 
            LEARNT: % grown by = grow/sec * 0.3
            hostname      hack  sec grow grown by
            n00dles          1    1 3000 11.052% <-- nerfed!?
            foodnstuff       1   10    5  0.015%
                            45    5    5  0.017% <-- half security, grow/(10-1.5) * 0.3
            sigma-cosmetics  1   10   10  0.030%
                            45   10   10  0.030% <-- same even w hack level 45!
            joesguns         1   15   20  0.040%
            hong-fang-tea    1   15   20  0.040%
            harakiri-sushi   1   15   40  0.080% <-- x2 grow 
        
            Strategy: keep chasing the biggest $/sec, as I level up so that
            I can get access to more machines to recover/grow back what I stole.
        
            hack time = weaken time / 4.
            grow time = weaken time / 1.25. 

        */
        await ns.grow(target);
        
        ns.printf(`Grew %s: %d milliseconds`, target, performance.now() - start);
        
        if(i < numIterations) {
            // Small delay to allow any parallel threads to finish so next iteration get max chance
            await ns.sleep(100);
        } 
    }

}

export function autocomplete(data, args) {
    return data.servers;
}