//import { log } from "log.js";
// RAM 1.70 GB (base, hack)

/* hack: Minimal hack-only script, repeat hack x times
 * syntax: hack.js target numIterations
 */

/** @param {NS} ns **/
export async function main(ns) {

    const target = ns.args[0];
    var numThreads = ns.args[1];
    var numIterations = ns.args[2];
    if (numIterations == undefined) {
        numIterations = 1;
    }
    if (numThreads == undefined) {
        numThreads = 1;
    }

    for(let i=1;i<=numIterations;i++){
        
        var startPerformance = performance.now()
        
        var hackMoney = await ns.hack(target); //, numThreads);

        //log(ns, `hacked ${ns.nFormat(hackMoney,"$0.00a")} in ${(performance.now() - startPerformance).toFixed(2)} ms`, "SUCCESS");   
        ns.print(`hacked ${ns.nFormat(hackMoney,"$0.00a")} in ${(performance.now() - startPerformance).toFixed(2)} ms`);
        
        if(i < numIterations) {
            // Small delay to allow any parallel threads to finish so next iteration get max hack chance
            await ns.sleep(100);
        } 
    }

}

export function autocomplete(data, args) {
    return data.servers;
}