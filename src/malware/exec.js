// import { functionName, functionName2 } from "./utils.js"
// RAM 2.90 GB (base, exec)

/* exec: execute multiple single-threaded scripts in parallel rather than 
 * execute one multi-threaded script. 
 * syntax: exec.js --script --host --threads --iterations --args=[]"
 */

/** @param {NS} ns **/
export async function main(ns) {

    const script = ns.args[0]; // first unnamed arg 
    const host = ns.args[1];
    const numThreads = ns.args[2];
    const script_args = ns.args.slice(3); 
        
    var start = performance.now();

    for(let t=1;t<=numThreads;t++) {        
        //ns.exec(script, host, 1, `${script_argstring}`, t);
        ns.exec(script, host, 1, ...script_args);
    }
    
    ns.printf(`Time: \t%f milliseconds`, performance.now() - start);

}